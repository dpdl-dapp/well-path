const{hypot:e,atan2:t,cos:a,sin:l}=Math,o=(e,t="afterend")=>{let a=e.closest("[class*=row]"),l=a.cloneNode(!0);l.querySelectorAll("input:not([name='index'])").forEach(e=>e.value=""),l.querySelector(".dropdown-menu").classList.remove("show"),l.querySelector("[name='index']").classList.remove("show"),a.insertAdjacentElement(t,l);let o="afterend"===t?l:a;do{let e=o.querySelector("[name='index']");e.value=+e.value+1,o=o.nextElementSibling}while(o)},r=(o,r=.2)=>{let{x:n=1.25,y:i=1.25}=o.layout.scene.camera.eye??{},s=e(i,n),c=t(i,n)+r;Plotly.relayout(o,"scene.camera.eye",{x:s*a(c),y:s*l(c)})},{cos:n,sin:i,acos:s,tan:c,hypot:d,floor:m,PI:u}=Math,p=u/180,h=e=>e*p,y=e=>e/p,f=(e,t)=>e.map(e=>e*t),D=(e,t)=>e.map(e=>e/t),b=(e,t)=>e.map((e,a)=>e+t[a]),v=(e,t)=>e.reduce((e,a,l)=>e+a*t[l],0),x=(e=0,t=0)=>{let a=i(e);return[a*n(t),a*i(t),n(e)]},g=(e,t=[0,0,1])=>s(v(t,e)),w=e=>{if(0===e)return 1;let t=.5*e;return c(t)/t},S=(e,t=[0,0,1],a=0,l=[0,0,0],o=g(e,t))=>b(l,f(b(e,t),.5*a*w(o))),E=(e,t=[0,0,1],a,l=0)=>0===l?t:D(b(f(t,i(l-a)),f(e,i(a))),i(l)),M=e=>{let t=[0,0,1],a=[0,0,0];return e.map(([l,o,r],n)=>{let i=x(h(o||0),h(r||0)),s=g(i,t),c=n>0?l-e[n-1][0]:l,[m,u,p]=a=S(i,t,c,a,s),y=0===s&&0===c?0:s/c;t=i;let f=d(m,u);return{MD:l,dMD:c,Incl:o,Azim:r,DLS:y,NS:m,EW:u,TVD:p,HD:f,t:i,DL:s}})},A=(e,t=1)=>{let a=L(e),l=[];return e.forEach((o,r)=>{let n=m(y(o.DL)/t);if(n>0){let t=(o.MD-e[r-1]?.MD)/(n+1),i=Array(n).fill(0).map((e,l)=>a(o.MD-(n-l)*t));l.push(...i)}l.push(o)}),l},L=e=>t=>{let a=e.findIndex(e=>e.MD>t),{t:l,DLS:o=0,DL:r=0}=e[a]??{},{t:n,MD:i=0,NS:s=0,EW:c=0,TVD:d=0}=0===a?{}:e[a-1]??e.at(-1),m=t-i,u=o*m,[p,h,y]=S(E(l,n,u,r),n,m,[s,c,d],u);return{MD:t,NS:p,EW:h,TVD:y,DLS:o}},q=document.forms.ds,{min:N,max:I,ceil:z,PI:k}=Math,T=document.getElementById("well3D"),F=e=>{let t=e-(F.t0??e);F.t0=e,r(T,3e-5*t*k),F.requestId=requestAnimationFrame(F)},V=e=>{let{x:t=1,y:a=1,z:l=1}=T?.layout?.scene?.aspectratio??{};Plotly.relayout(T,"scene.aspectratio",{x:t*e,y:a*e,z:l*e})},W=()=>{F.requestId?(cancelAnimationFrame(F.requestId),F.requestId=void 0,F.t0=void 0):F.requestId=requestAnimationFrame(F)};Array(z(q.offsetHeight/q.MD[1].offsetHeight)).fill(0).forEach((e,t)=>o(q.MD[1],"afterend"));const P=(e,t=!0)=>{let a=[];return e.forEach(e=>a.push(e,e)),t?a.pop():a.shift(),a},B=e=>{e=A(e=e.filter(e=>!isNaN(e.MD)));let t="dark"===document.documentElement.dataset.bsTheme,a=t?"#bbb":"#444",l=e.map(e=>e.EW),o=e.map(e=>e.NS),r=e.map(e=>e.TVD),n=N(...l),i=N(...o),s=I(...r)-N(...r),c=[n,I(...l,n+s)],d=[i,I(...o,i+s)],m=P(e.map(e=>100*y(e.DLS)),!1),u=P(e.map(e=>e.MD.toFixed(0))).map((e,t,a)=>t%2?"":`MD: ${a[t-1]}-${e}<br>DLS: ${m[t].toFixed(3)}`),p=[{name:"",mode:"lines",type:"scatter3d",showlegend:!1,x:P(l),y:P(o),z:P(r),line:{width:5,color:m,showscale:!0,cmax:6,cmin:0,colorscale:[[0,"green"],[.33,"yellow"],[1,"red"]],colorbar:{outlinewidth:t?0:1,title:{text:"DLS, Â°/100ft",side:"right"},thickness:16,yanchor:"top",y:1,ypad:0,xanchor:"left",x:0,xpad:9,orientation:"h",len:.92}},text:u,hoverinfo:"text"}],h={mirror:!0,zeroline:!1,showline:!0,hoverformat:".2f",color:a,spikethickness:1,spikecolor:"RoyalBlue",showspikes:!0,spikesides:!1},f=" &#9654;",D=" &#10074;&#10074;",b=[{buttons:[{args:[],name:"-",label:"&#10134;",method:"relayout"},{args:[],name:"+",label:"&#10133;",method:"relayout"},{args2:[{"updatemenus[0].buttons[2].label":D,"updatemenus.y":"0"}],args:[{"updatemenus[0].buttons[2].label":f}],label:F.requestId?D:f,method:"relayout",name:"animate"}],pad:{b:3,r:6},bgcolor:t?"#313539":"#fff",borderwidth:2,bordercolor:t?"#212529":"#fff",type:"buttons",showactive:!1,direction:"up",x:1,xanchor:"right",y:0,yanchor:"bottom"}],v={margin:{l:0,r:0,b:0,t:3},paper_bgcolor:t?"#212529":"#fff",autosize:!0,font:{size:12,family:"Arial",color:a},updatemenus:b,modebar:{orientation:"v"},scene:{aspectratio:{x:1,y:1,z:1},xaxis:{title:"EW, ft",...h,range:c},yaxis:{title:"NS, ft",...h,range:d},zaxis:{title:"TVD, ft",...h,autorange:"reversed",minallowed:0},camera:{projection:{type:"orthographic"}}}};Plotly.react(T,p,v,{responsive:!0,displaylogo:!1,modeBarButtonsToRemove:["resetCameraLastSave3d","zoom3d"]})},R=(e=[[0,NaN,NaN]],t=0)=>{let a=M(e);a.forEach(({MD:e,Incl:a,Azim:l,DLS:r,NS:n,EW:i,TVD:s},c)=>{let d=c+t;q.MD[d]||o(q.MD[d-1]),q.MD[d].value=e,q.Incl[d].value=a,q.Azim[d].value=l,q.DLS[d].value=(100*y(r)).toFixed(3),q.TVD[d].value=s.toFixed(2),q.NS[d].value=n.toFixed(2),q.EW[d].value=i.toFixed(2)}),B(a)},H=async()=>{let e=await fetch("https://dpdl-dapp.github.io/well-path/inclinometry.csv");R((await e.text()).split("\n").map(e=>e.split(";").map(e=>+e)))};q.addEventListener("paste",e=>{e.preventDefault(),e.target.blur(),R(e.clipboardData.getData("text").split("\n").filter(e=>!!e).map(e=>e.split("	").map(e=>+e.replace(",","."))),+e.target.closest("[class*=row]").querySelector("[name='index']").value-1)}),q.loadExample.addEventListener("click",H),q.querySelector('input[type="reset"]').addEventListener("click",()=>{q.querySelectorAll(".row-vir").forEach((e,t)=>{t>18&&e.remove()}),R()}),q.addEventListener("change",e=>{R(Array.from(q.MD).map((e,t)=>[e.valueAsNumber,q.Incl[t].valueAsNumber,q.Azim[t].valueAsNumber]))}),R(),H(),F(0),T.on("plotly_buttonclicked",e=>{let{name:t}=e.button;"animate"===t?W():"+"===t?V(1.1):"-"===t&&V(.9)}),[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map(e=>new bootstrap.Tooltip(e)),window.addRow=o,window.deleteRow=e=>{let t=e.target.closest("[class*=row]"),a=t.nextElementSibling;for(t.parentElement.children.length>2&&t.remove();a;){let e=a.querySelector(".btn");e.value=+e.value-1,a=a.nextElementSibling}};
//# sourceMappingURL=index.41c74c14.js.map
